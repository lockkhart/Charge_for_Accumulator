int PowerLed = 13; //пін включення живлення
int ChargeLed = 11; //пін стану зарядження аккумулятору
int Charge = 10; //пін регулювання заряду аккумулятору
int R1 = 10000; // Резистор на 100 КОм
int R2 = 10000; // Резистор на 10 КОм
float Analog0 = 0; // Аналогова складна для підключення піну АЦП мікроконтролеру
float Analog1 = 0; // Аналогова складна для підключення піну АЦП мікроконтролеру
int Volts0 = 0; // Переведення вводної АЦП в напругу для розуміння заряду акумулятору
int Time0 = 0; // складова для таймеру
int Mode = 0;
void setup() {
  pinMode (PowerLed, OUTPUT); // Назначення виходу піну 13 плати для показання стану живлення пристрою
  pinMode (ChargeLed, OUTPUT); // Назначення виходу піну 11 плати для показання стану живлення аккумулятору
  pinMode (Charge, OUTPUT); //Назначення виходу піну 10 плати для початку живлення аккумулятору
  pinMode (Charge1, OUTPUT); //Назначення виходу піну 10 плати для початку живлення аккумулятору
}

void loop() {
    Analog0 = analogRead (A5); // призначення аналогового піну А5 під складну
  Volts0 = Analog0 * (R2/(R1+R2)); //перерахування виходу данних АЦП в напругу, переделать, посмотреть Vref
  digitalWrite(PowerLed, HIGH); //включення світлодіоду, що свідчить про підключення пристрою до живлення
if (Volts0 <= 10.5 && Volts0 >= 13.5) { //призначення умови заряду аккумулятору
    Charge1();
}
if (Volts0 <= 10.5 && Volts0 >= 6.8 ) {
  Charge2();
}
else {
  Charge0();
}  
}
void Charge0() { // функція заряду акумулятору при глубокому розряді або після заряджання, для компенсації саморозряду
while (Time0++ > 3000) {
       digitalWrite(Charge, HIGH); // включення піну для заряду акумулятору
       digitalWrite(ChargeLed, HIGH); // включення світлодіода для показання стану заряду акб
}
  if (Time0 > 3000) {
       Time0 = 0;     //зброс таймеру на нуль)
   } else {
     Time0++;
}
}
void Charge1() {
       digitalWrite(Charge, HIGH); //включення стану заряджання
       digitalWrite(ChargeLed, HIGH); //включення світлодіоду про стан 
   }
void Charge2() {
  digitalWrite(Charge1, HIGH); //включення стану заряджання
  digitalWrite(ChargeLed, HIGH); //включення світлодіоду про стан 
}
